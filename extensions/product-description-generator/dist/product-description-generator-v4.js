(()=>{var ne=Object.defineProperty;var K=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var W=(e,t,n)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>{for(var n in t||(t={}))oe.call(t,n)&&W(e,n,t[n]);if(K)for(var n of K(t))ie.call(t,n)&&W(e,n,t[n]);return e};var Y=(e,t,n)=>new Promise((o,r)=>{var s=d=>{try{c(n.next(d))}catch(p){r(p)}},f=d=>{try{c(n.throw(d))}catch(p){r(p)}},c=d=>d.done?o(d.value):Promise.resolve(d.value).then(s,f);c((n=n.apply(e,t)).next())});function R(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null||t===Object.prototype}function y(e){return e!=null&&e.kind===3}var A="__current",j={},fe=[];function H(e,{strict:t=!0,components:n}={}){let o=0,r={strict:t,mounted:!1,channel:e,children:fe,nodes:new WeakSet,parents:new WeakMap,tops:new WeakMap,components:new WeakMap,fragments:new WeakMap};t&&Object.freeze(n);let s={kind:0,options:t?Object.freeze({strict:t,components:n}):{strict:t,components:n},get children(){return r.children},createComponent(f,...c){if(n&&n.indexOf(f)<0)throw new Error(`Unsupported component: ${f}`);let[d,p,...i]=c,l=d!=null?d:{},a=[],x={};if(d)for(let m of Object.keys(d))m!=="children"&&(x[m]=C(Z(d[m])));if(p)if(Array.isArray(p))for(let m of p)a.push(u(m,s));else{a.push(u(p,s));for(let m of i)a.push(u(m,s))}let T=`${o++}`,g={externalProps:t?Object.freeze(l):l,internalProps:x,children:t?Object.freeze(a):a},h=O({kind:1,get children(){return g.children},get props(){return g.externalProps},get remoteProps(){return g.internalProps},remove:()=>X(h),updateProps:m=>ae(h,m,g,r),append:(...m)=>I(h,m.map(b=>u(b,s)),g,r),appendChild:m=>D(h,u(m,s),g,r),removeChild:m=>M(h,m,g,r),replaceChildren:(...m)=>F(h,m.map(b=>u(b,s)),g,r),insertBefore:(m,b)=>k(h,u(m,s),b,g,r),insertChildBefore:(m,b)=>k(h,u(m,s),b,g,r)},j);r.components.set(h,g),Object.defineProperty(h,"type",{value:f,configurable:!1,writable:!1,enumerable:!0}),B(h,r),z(h,T,s);for(let m of g.children)_(h,m,r);return h},createText(f=""){let c=`${o++}`,d={text:f},p=l=>pe(i,l,d,r),i=O({kind:2,get text(){return d.text},update:p,updateText:p,remove:()=>X(i)},j);return B(i,r),z(i,c,s),i},createFragment(){let f=`${o++}`,c={children:t?Object.freeze([]):[]},d=O({kind:3,get children(){return c.children},append:(...p)=>I(d,p.map(i=>u(i,s)),c,r),appendChild:p=>D(d,u(p,s),c,r),removeChild:p=>M(d,p,c,r),replaceChildren:(...p)=>F(d,p.map(i=>u(i,s)),c,r),insertBefore:(p,i)=>k(d,u(p,s),i,c,r),insertChildBefore:(p,i)=>k(d,u(p,s),i,c,r)},j);return r.fragments.set(d,c),B(d,r),z(d,f,s),d},append:(...f)=>I(s,f.map(c=>u(c,s)),r,r),appendChild:f=>D(s,u(f,s),r,r),replaceChildren:(...f)=>F(s,f.map(c=>u(c,s)),r,r),removeChild:f=>M(s,f,r,r),insertBefore:(f,c)=>k(s,u(f,s),c,r,r),insertChildBefore:(f,c)=>k(s,u(f,s),c,r,r),mount(){return r.mounted?Promise.resolve():(r.mounted=!0,Promise.resolve(e(0,r.children.map(N))))}};return s}function de(e,{tops:t}){var n;return((n=t.get(e))===null||n===void 0?void 0:n.kind)===0}function Q(e,t){let n=o=>{if("children"in o)for(let r of o.children)t(r),n(r)};n(e)}function P(e,t,{remote:n,local:o}){let{mounted:r,channel:s}=t;r&&(e.kind===0||de(e,t))&&n(s),o()}function pe(e,t,n,o){return P(e,o,{remote:r=>r(3,e.id,t),local:()=>{n.text=t}})}var E=Symbol("ignore");function ae(e,t,n,o){let{strict:r}=o,{internalProps:s,externalProps:f}=n,c={},d=[],p=!1;for(let i of Object.keys(t)){if(i==="children")continue;let l=f[i],a=t[i],x=s[i],T=Z(a);if(x===T&&(T==null||typeof T!="object"))continue;let[g,h]=L(x,T);h&&d.push(...h),g!==E&&(p=!0,c[i]=g,y(l)&&U(l,o),y(a)&&_(e,a,o))}return P(e,o,{remote:i=>{p&&i(4,e.id,c)},local:()=>{let i=O(O({},f),t);n.externalProps=r?Object.freeze(i):i,n.internalProps=O(O({},n.internalProps),c);for(let[l,a]of d)l[A]=a}})}function L(e,t,n=new Set){return n.has(e)?[E]:typeof e=="function"&&A in e?(n.add(e),[typeof t=="function"?E:C(t),[[e,t]]]):Array.isArray(e)?(n.add(e),ue(e,t,n)):R(e)&&!y(e)?(n.add(e),me(e,t,n)):[e===t?E:t]}function C(e,t=new Map){let n=t.get(e);if(n)return n;if(y(e))return t.set(e,e),e;if(Array.isArray(e)){let o=[];t.set(e,o);for(let r of e)o.push(C(r,t));return o}if(R(e)){let o={};t.set(e,o);for(let r of Object.keys(e))o[r]=C(e[r],t);return o}if(typeof e=="function"){let o=(...r)=>o[A](...r);return Object.defineProperty(o,A,{enumerable:!1,configurable:!1,writable:!0,value:e}),t.set(e,o),o}return e}function w(e,t=new Set){if(!t.has(e)){if(t.add(e),Array.isArray(e))return e.reduce((n,o)=>{let r=w(o,t);return r?[...n,...r]:n},[]);if(R(e))return Object.keys(e).reduce((n,o)=>{let r=w(e[o],t);return r?[...n,...r]:n},[]);if(typeof e=="function")return A in e?[e]:void 0}}function X(e){var t;(t=e.parent)===null||t===void 0||t.removeChild(e)}function I(e,t,n,o){for(let r of t)D(e,r,n,o)}function D(e,t,n,o){var r;let{nodes:s,strict:f}=o;if(!s.has(t))throw new Error("Cannot append a node that was not created by this remote root");let c=t.parent,d=(r=c==null?void 0:c.children.indexOf(t))!==null&&r!==void 0?r:-1;return P(e,o,{remote:p=>{p(1,e.id,d<0?e.children.length:e.children.length-1,N(t),c?c.id:!1)},local:()=>{_(e,t,o);let p;if(c){let i=V(c,o),l=[...i.children];l.splice(d,1),c===e?p=l:(i.children=f?Object.freeze(l):l,p=[...n.children])}else p=[...n.children];p.push(t),n.children=f?Object.freeze(p):p}})}function F(e,t,n,o){for(let r of e.children)M(e,r,n,o);I(e,t,n,o)}function M(e,t,n,o){let{strict:r}=o,s=e.children.indexOf(t);if(s!==-1)return P(e,o,{remote:f=>f(2,e.id,s),local:()=>{U(t,o);let f=[...n.children];f.splice(f.indexOf(t),1),n.children=r?Object.freeze(f):f}})}function k(e,t,n,o,r){var s;let{strict:f,nodes:c}=r;if(!c.has(t))throw new Error("Cannot insert a node that was not created by this remote root");let d=t.parent,p=(s=d==null?void 0:d.children.indexOf(t))!==null&&s!==void 0?s:-1;return P(e,r,{remote:i=>{let l=n==null?e.children.length-1:e.children.indexOf(n);i(1,e.id,l<p||p<0?l:l-1,N(t),d?d.id:!1)},local:()=>{_(e,t,r);let i;if(d){let l=V(d,r),a=[...l.children];a.splice(p,1),d===e?i=a:(l.children=f?Object.freeze(a):a,i=[...o.children])}else i=[...o.children];n==null?i.push(t):i.splice(i.indexOf(n),0,t),o.children=f?Object.freeze(i):i}})}function u(e,t){return typeof e=="string"?t.createText(e):e}function _(e,t,n){let{tops:o,parents:r}=n,s=e.kind===0?e:o.get(e);o.set(t,s),r.set(t,e),v(t,n),Q(t,f=>{o.set(f,s),v(f,n)})}function v(e,t){if(e.kind!==1)return;let n=e.props;n&&Object.values(n).forEach(o=>{y(o)&&_(e,o,t)})}function U(e,t){let{tops:n,parents:o}=t;n.delete(e),o.delete(e),Q(e,r=>{n.delete(r),q(r,t)}),q(e,t)}function q(e,t){if(e.kind!==1)return;let n=e.remoteProps;for(let o of Object.keys(n!=null?n:{})){let r=n[o];y(r)&&U(r,t)}}function B(e,{parents:t,tops:n,nodes:o}){o.add(e),Object.defineProperty(e,"parent",{get(){return t.get(e)},configurable:!0,enumerable:!0}),Object.defineProperty(e,"top",{get(){return n.get(e)},configurable:!0,enumerable:!0})}function N(e){return e.kind===2?{id:e.id,kind:e.kind,text:e.text}:{id:e.id,kind:e.kind,type:e.type,props:e.remoteProps,children:e.children.map(t=>N(t))}}function Z(e){return y(e)?le(e):e}function le(e){return{id:e.id,kind:e.kind,get children(){return e.children.map(t=>N(t))}}}function V(e,t){return e.kind===0?t:e.kind===3?t.fragments.get(e):t.components.get(e)}function z(e,t,n){Object.defineProperty(e,"id",{value:t,configurable:!0,writable:!1,enumerable:!1}),Object.defineProperty(e,"root",{value:n,configurable:!0,writable:!1,enumerable:!1})}function me(e,t,n){if(!R(t)){var o;return[C(t),(o=w(e))===null||o===void 0?void 0:o.map(c=>[c,void 0])]}let r=!1,s=[],f={};for(let c in e){let d=e[c];if(!(c in t)){r=!0;let a=w(d);a&&s.push(...a.map(x=>[x,void 0]))}let p=t[c],[i,l]=L(d,p,n);l&&s.push(...l),i!==E&&(r=!0,f[c]=i)}for(let c in t)c in f||(r=!0,f[c]=C(t[c]));return[r?f:E,s]}function ue(e,t,n){if(!Array.isArray(t)){var o;return[C(t),(o=w(e))===null||o===void 0?void 0:o.map(i=>[i,void 0])]}let r=!1,s=[],f=t.length,c=e.length,d=Math.max(c,f),p=[];for(let i=0;i<d;i++){let l=e[i],a=t[i];if(i<f){if(i>=c){r=!0,p[i]=C(a);continue}let[x,T]=L(l,a,n);if(T&&s.push(...T),x===E){p[i]=l;continue}r=!0,p[i]=x}else{r=!0;let x=w(l);x&&s.push(...x.map(T=>[T,void 0]))}}return[r?p:E,s]}function ee(){return(t,n)=>{var o;function r(...s){return Y(this,null,function*(){if(s.length===1)return n(...s);let[{channel:f,components:c},d]=s,p=H(f,{components:c,strict:!0}),i=n(p,d);return typeof i=="object"&&i!=null&&"then"in i&&(i=yield i),p.mount(),i})}return(o=globalThis.shopify)===null||o===void 0||o.extend(t,r),r}}var $=ee();var he="admin.product-details.action.render",te=Date.now(),re="DIRECT_OVERLAY_v6",We=$(he,(e,{i18n:t,close:n,data:o})=>{var s;if(console.log("\u{1F525}\u{1F525}\u{1F525} DIRECT OVERLAY MODE - NO UI - ActionExtension.js LOADED \u{1F525}\u{1F525}\u{1F525}"),console.log(`\u{1F680}\u{1F680}\u{1F680} THUNDER TEXT OVERLAY v5.0 - COMMIT: ${re} - CACHE BUSTER: ${te} \u{1F680}\u{1F680}\u{1F680}`),console.log("Extension loaded with data:",o),console.log("\u{1F3F7}\uFE0F Version tracking - Commit:",re,"Deployed:",new Date().toISOString()),typeof document!="undefined"){let f=document.createElement("meta");f.httpEquiv="Cache-Control",f.content="no-cache, no-store, must-revalidate",(s=document.head)==null||s.appendChild(f)}r();function r(){var f;console.log("\u{1F3AF} Button clicked! Starting Thunder Text overlay workflow...");try{let c=window.location.hostname.replace(".myshopify.com",""),d=new URLSearchParams({source:"admin_extension",shop:`${c}.myshopify.com`,cache_bust:te.toString()});try{if(o&&o.selected&&o.selected.length>0){let a=o.selected[0];console.log("\u{1F4E6} Product data available:",Object.keys(a)),a.id&&d.set("productId",a.id),a.title&&d.set("productTitle",a.title),a.productType&&d.set("productType",a.productType),a.vendor&&d.set("vendor",a.vendor);let x=((f=window.shopifyApp)==null?void 0:f.accessToken)||window.sessionToken;x&&d.set("accessToken",x)}else console.log("\u26A0\uFE0F No product selected or data unavailable - continuing with basic workflow")}catch(a){console.log("\u26A0\uFE0F Could not extract product data:",a,"- continuing with basic workflow")}let i=`https://thunder-text-nine.vercel.app${`/product-overlay?${d.toString()}`}`;console.log("\u{1F680} Opening Thunder Text overlay:",i),window.open(i,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes")?(console.log("\u2705 Successfully opened overlay window"),setTimeout(()=>{n()},500)):(console.log("\u26A0\uFE0F Popup blocked, trying alternative method"),window.parent?(window.parent.open(i,"_blank"),n()):console.error("\u274C Failed to open Thunder Text overlay - popup blocked"))}catch(c){console.error("\u274C Error opening Thunder Text overlay:",c)}}});})();
//# sourceMappingURL=product-description-generator-v4.js.map
