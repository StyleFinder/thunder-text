(()=>{var se=Object.defineProperty;var X=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var q=(e,t,n)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||(t={}))de.call(t,n)&&q(e,n,t[n]);if(X)for(var n of X(t))fe.call(t,n)&&q(e,n,t[n]);return e};var J=(e,t,n)=>new Promise((o,r)=>{var s=f=>{try{i(n.next(f))}catch(d){r(d)}},p=f=>{try{i(n.throw(f))}catch(d){r(d)}},i=f=>f.done?o(f.value):Promise.resolve(f.value).then(s,p);i((n=n.apply(e,t)).next())});function k(e){if(e==null||typeof e!="object")return!1;let t=Object.getPrototypeOf(e);return t==null||t===Object.prototype}function y(e){return e!=null&&e.kind===3}var A="__current",F={},le=[];function L(e,{strict:t=!0,components:n}={}){let o=0,r={strict:t,mounted:!1,channel:e,children:le,nodes:new WeakSet,parents:new WeakMap,tops:new WeakMap,components:new WeakMap,fragments:new WeakMap};t&&Object.freeze(n);let s={kind:0,options:t?Object.freeze({strict:t,components:n}):{strict:t,components:n},get children(){return r.children},createComponent(p,...i){if(n&&n.indexOf(p)<0)throw new Error(`Unsupported component: ${p}`);let[f,d,...c]=i,a=f!=null?f:{},m=[],l={};if(f)for(let u of Object.keys(f))u!=="children"&&(l[u]=b(ne(f[u])));if(d)if(Array.isArray(d))for(let u of d)m.push(h(u,s));else{m.push(h(d,s));for(let u of c)m.push(h(u,s))}let T=`${o++}`,g={externalProps:t?Object.freeze(a):a,internalProps:l,children:t?Object.freeze(m):m},x=C({kind:1,get children(){return g.children},get props(){return g.externalProps},get remoteProps(){return g.internalProps},remove:()=>Z(x),updateProps:u=>he(x,u,g,r),append:(...u)=>I(x,u.map(E=>h(E,s)),g,r),appendChild:u=>M(x,h(u,s),g,r),removeChild:u=>S(x,u,g,r),replaceChildren:(...u)=>z(x,u.map(E=>h(E,s)),g,r),insertBefore:(u,E)=>w(x,h(u,s),E,g,r),insertChildBefore:(u,E)=>w(x,h(u,s),E,g,r)},F);r.components.set(x,g),Object.defineProperty(x,"type",{value:p,configurable:!1,writable:!1,enumerable:!0}),H(x,r),U(x,T,s);for(let u of g.children)_(x,u,r);return x},createText(p=""){let i=`${o++}`,f={text:p},d=a=>ue(c,a,f,r),c=C({kind:2,get text(){return f.text},update:d,updateText:d,remove:()=>Z(c)},F);return H(c,r),U(c,i,s),c},createFragment(){let p=`${o++}`,i={children:t?Object.freeze([]):[]},f=C({kind:3,get children(){return i.children},append:(...d)=>I(f,d.map(c=>h(c,s)),i,r),appendChild:d=>M(f,h(d,s),i,r),removeChild:d=>S(f,d,i,r),replaceChildren:(...d)=>z(f,d.map(c=>h(c,s)),i,r),insertBefore:(d,c)=>w(f,h(d,s),c,i,r),insertChildBefore:(d,c)=>w(f,h(d,s),c,i,r)},F);return r.fragments.set(f,i),H(f,r),U(f,p,s),f},append:(...p)=>I(s,p.map(i=>h(i,s)),r,r),appendChild:p=>M(s,h(p,s),r,r),replaceChildren:(...p)=>z(s,p.map(i=>h(i,s)),r,r),removeChild:p=>S(s,p,r,r),insertBefore:(p,i)=>w(s,h(p,s),i,r,r),insertChildBefore:(p,i)=>w(s,h(p,s),i,r,r),mount(){return r.mounted?Promise.resolve():(r.mounted=!0,Promise.resolve(e(0,r.children.map(N))))}};return s}function me(e,{tops:t}){var n;return((n=t.get(e))===null||n===void 0?void 0:n.kind)===0}function re(e,t){let n=o=>{if("children"in o)for(let r of o.children)t(r),n(r)};n(e)}function P(e,t,{remote:n,local:o}){let{mounted:r,channel:s}=t;r&&(e.kind===0||me(e,t))&&n(s),o()}function ue(e,t,n,o){return P(e,o,{remote:r=>r(3,e.id,t),local:()=>{n.text=t}})}var O=Symbol("ignore");function he(e,t,n,o){let{strict:r}=o,{internalProps:s,externalProps:p}=n,i={},f=[],d=!1;for(let c of Object.keys(t)){if(c==="children")continue;let a=p[c],m=t[c],l=s[c],T=ne(m);if(l===T&&(T==null||typeof T!="object"))continue;let[g,x]=$(l,T);x&&f.push(...x),g!==O&&(d=!0,i[c]=g,y(a)&&v(a,o),y(m)&&_(e,m,o))}return P(e,o,{remote:c=>{d&&c(4,e.id,i)},local:()=>{let c=C(C({},p),t);n.externalProps=r?Object.freeze(c):c,n.internalProps=C(C({},n.internalProps),i);for(let[a,m]of f)a[A]=m}})}function $(e,t,n=new Set){return n.has(e)?[O]:typeof e=="function"&&A in e?(n.add(e),[typeof t=="function"?O:b(t),[[e,t]]]):Array.isArray(e)?(n.add(e),Te(e,t,n)):k(e)&&!y(e)?(n.add(e),ge(e,t,n)):[e===t?O:t]}function b(e,t=new Map){let n=t.get(e);if(n)return n;if(y(e))return t.set(e,e),e;if(Array.isArray(e)){let o=[];t.set(e,o);for(let r of e)o.push(b(r,t));return o}if(k(e)){let o={};t.set(e,o);for(let r of Object.keys(e))o[r]=b(e[r],t);return o}if(typeof e=="function"){let o=(...r)=>o[A](...r);return Object.defineProperty(o,A,{enumerable:!1,configurable:!1,writable:!0,value:e}),t.set(e,o),o}return e}function R(e,t=new Set){if(!t.has(e)){if(t.add(e),Array.isArray(e))return e.reduce((n,o)=>{let r=R(o,t);return r?[...n,...r]:n},[]);if(k(e))return Object.keys(e).reduce((n,o)=>{let r=R(e[o],t);return r?[...n,...r]:n},[]);if(typeof e=="function")return A in e?[e]:void 0}}function Z(e){var t;(t=e.parent)===null||t===void 0||t.removeChild(e)}function I(e,t,n,o){for(let r of t)M(e,r,n,o)}function M(e,t,n,o){var r;let{nodes:s,strict:p}=o;if(!s.has(t))throw new Error("Cannot append a node that was not created by this remote root");let i=t.parent,f=(r=i==null?void 0:i.children.indexOf(t))!==null&&r!==void 0?r:-1;return P(e,o,{remote:d=>{d(1,e.id,f<0?e.children.length:e.children.length-1,N(t),i?i.id:!1)},local:()=>{_(e,t,o);let d;if(i){let c=oe(i,o),a=[...c.children];a.splice(f,1),i===e?d=a:(c.children=p?Object.freeze(a):a,d=[...n.children])}else d=[...n.children];d.push(t),n.children=p?Object.freeze(d):d}})}function z(e,t,n,o){for(let r of e.children)S(e,r,n,o);I(e,t,n,o)}function S(e,t,n,o){let{strict:r}=o,s=e.children.indexOf(t);if(s!==-1)return P(e,o,{remote:p=>p(2,e.id,s),local:()=>{v(t,o);let p=[...n.children];p.splice(p.indexOf(t),1),n.children=r?Object.freeze(p):p}})}function w(e,t,n,o,r){var s;let{strict:p,nodes:i}=r;if(!i.has(t))throw new Error("Cannot insert a node that was not created by this remote root");let f=t.parent,d=(s=f==null?void 0:f.children.indexOf(t))!==null&&s!==void 0?s:-1;return P(e,r,{remote:c=>{let a=n==null?e.children.length-1:e.children.indexOf(n);c(1,e.id,a<d||d<0?a:a-1,N(t),f?f.id:!1)},local:()=>{_(e,t,r);let c;if(f){let a=oe(f,r),m=[...a.children];m.splice(d,1),f===e?c=m:(a.children=p?Object.freeze(m):m,c=[...o.children])}else c=[...o.children];n==null?c.push(t):c.splice(c.indexOf(n),0,t),o.children=p?Object.freeze(c):c}})}function h(e,t){return typeof e=="string"?t.createText(e):e}function _(e,t,n){let{tops:o,parents:r}=n,s=e.kind===0?e:o.get(e);o.set(t,s),r.set(t,e),V(t,n),re(t,p=>{o.set(p,s),V(p,n)})}function V(e,t){if(e.kind!==1)return;let n=e.props;n&&Object.values(n).forEach(o=>{y(o)&&_(e,o,t)})}function v(e,t){let{tops:n,parents:o}=t;n.delete(e),o.delete(e),re(e,r=>{n.delete(r),ee(r,t)}),ee(e,t)}function ee(e,t){if(e.kind!==1)return;let n=e.remoteProps;for(let o of Object.keys(n!=null?n:{})){let r=n[o];y(r)&&v(r,t)}}function H(e,{parents:t,tops:n,nodes:o}){o.add(e),Object.defineProperty(e,"parent",{get(){return t.get(e)},configurable:!0,enumerable:!0}),Object.defineProperty(e,"top",{get(){return n.get(e)},configurable:!0,enumerable:!0})}function N(e){return e.kind===2?{id:e.id,kind:e.kind,text:e.text}:{id:e.id,kind:e.kind,type:e.type,props:e.remoteProps,children:e.children.map(t=>N(t))}}function ne(e){return y(e)?xe(e):e}function xe(e){return{id:e.id,kind:e.kind,get children(){return e.children.map(t=>N(t))}}}function oe(e,t){return e.kind===0?t:e.kind===3?t.fragments.get(e):t.components.get(e)}function U(e,t,n){Object.defineProperty(e,"id",{value:t,configurable:!0,writable:!1,enumerable:!1}),Object.defineProperty(e,"root",{value:n,configurable:!0,writable:!1,enumerable:!1})}function ge(e,t,n){if(!k(t)){var o;return[b(t),(o=R(e))===null||o===void 0?void 0:o.map(i=>[i,void 0])]}let r=!1,s=[],p={};for(let i in e){let f=e[i];if(!(i in t)){r=!0;let m=R(f);m&&s.push(...m.map(l=>[l,void 0]))}let d=t[i],[c,a]=$(f,d,n);a&&s.push(...a),c!==O&&(r=!0,p[i]=c)}for(let i in t)i in p||(r=!0,p[i]=b(t[i]));return[r?p:O,s]}function Te(e,t,n){if(!Array.isArray(t)){var o;return[b(t),(o=R(e))===null||o===void 0?void 0:o.map(c=>[c,void 0])]}let r=!1,s=[],p=t.length,i=e.length,f=Math.max(i,p),d=[];for(let c=0;c<f;c++){let a=e[c],m=t[c];if(c<p){if(c>=i){r=!0,d[c]=b(m);continue}let[l,T]=$(a,m,n);if(T&&s.push(...T),l===O){d[c]=a;continue}r=!0,d[c]=l}else{r=!0;let l=R(a);l&&s.push(...l.map(T=>[T,void 0]))}}return[r?d:O,s]}function ie(){return(t,n)=>{var o;function r(...s){return J(this,null,function*(){if(s.length===1)return n(...s);let[{channel:p,components:i},f]=s,d=L(p,{components:i,strict:!0}),c=n(d,f);return typeof c=="object"&&c!=null&&"then"in c&&(c=yield c),d.mount(),c})}return(o=globalThis.shopify)===null||o===void 0||o.extend(t,r),r}}var K=ie();var W="AdminAction";var G="BlockStack";var j="Button";var B="Text";var Ce="admin.product-details.action.render",ce=Date.now(),Y="2d201b0",nt=K(Ce,(e,{i18n:t,close:n,data:o})=>{var p;if(console.log(`\u{1F680}\u{1F680}\u{1F680} THUNDER TEXT OVERLAY v5.0 - COMMIT: ${Y} - CACHE BUSTER: ${ce} \u{1F680}\u{1F680}\u{1F680}`),console.log("Extension loaded with data:",o),console.log("\u{1F3F7}\uFE0F Version tracking - Commit:",Y,"Deployed:",new Date().toISOString()),typeof document!="undefined"){let i=document.createElement("meta");i.httpEquiv="Cache-Control",i.content="no-cache, no-store, must-revalidate",(p=document.head)==null||p.appendChild(i)}s();function r(){var i;console.log("\u{1F3AF} Button clicked! Starting Thunder Text overlay workflow...");try{let f=window.location.hostname.replace(".myshopify.com",""),d=new URLSearchParams({source:"admin_extension",shop:`${f}.myshopify.com`,cache_bust:ce.toString()});try{if(o&&o.selected&&o.selected.length>0){let l=o.selected[0];console.log("\u{1F4E6} Product data available:",Object.keys(l)),l.id&&d.set("productId",l.id),l.title&&d.set("productTitle",l.title),l.productType&&d.set("productType",l.productType),l.vendor&&d.set("vendor",l.vendor);let T=((i=window.shopifyApp)==null?void 0:i.accessToken)||window.sessionToken;T&&d.set("accessToken",T)}else console.log("\u26A0\uFE0F No product selected or data unavailable - continuing with basic workflow")}catch(l){console.log("\u26A0\uFE0F Could not extract product data:",l,"- continuing with basic workflow")}let a=`https://thunder-text-nine.vercel.app${`/product-overlay?${d.toString()}`}`;console.log("\u{1F680} Opening Thunder Text overlay:",a),window.open(a,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes")?(console.log("\u2705 Successfully opened overlay window"),setTimeout(()=>{n()},500)):(console.log("\u26A0\uFE0F Popup blocked, trying alternative method"),window.parent?(window.parent.open(a,"_blank"),n()):console.error("\u274C Failed to open Thunder Text overlay - popup blocked"))}catch(f){console.error("\u274C Error opening Thunder Text overlay:",f)}}function s(){console.log("\u{1F3A8} Building UI with official navigation");let i=e.createComponent(G,{gap:"base"});i.append(e.createComponent(B,{variant:"headingMd"},`\u26A1 Thunder Text Overlay v5.0 \u{1F3AF} [${Y}]`)),i.append(e.createComponent(B,{variant:"bodyMd"},"Generate AI-powered product descriptions with customizable settings and instant preview.")),i.append(e.createComponent(j,{variant:"primary",onPress:()=>{console.log("\u{1F680} Thunder Text overlay button clicked!"),r()}},"\u2728 Generate Product Description")),i.append(e.createComponent(j,{onPress:n},"Cancel")),e.append(e.createComponent(W,{title:"Thunder Text - Product Description Generator"},i)),console.log("\u2705 UI built successfully with official navigation")}});})();
//# sourceMappingURL=product-description-generator-v4.js.map
