(()=>{var ne=Object.defineProperty;var G=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var K=(e,o,t)=>o in e?ne(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,E=(e,o)=>{for(var t in o||(o={}))re.call(o,t)&&K(e,t,o[t]);if(G)for(var t of G(o))ie.call(o,t)&&K(e,t,o[t]);return e};var $=(e,o,t)=>new Promise((r,n)=>{var s=l=>{try{c(t.next(l))}catch(p){n(p)}},d=l=>{try{c(t.throw(l))}catch(p){n(p)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,d);c((t=t.apply(e,o)).next())});function b(e){if(e==null||typeof e!="object")return!1;let o=Object.getPrototypeOf(e);return o==null||o===Object.prototype}function T(e){return e!=null&&e.kind===3}var k="__current",j={},de=[];function L(e,{strict:o=!0,components:t}={}){let r=0,n={strict:o,mounted:!1,channel:e,children:de,nodes:new WeakSet,parents:new WeakMap,tops:new WeakMap,components:new WeakMap,fragments:new WeakMap};o&&Object.freeze(t);let s={kind:0,options:o?Object.freeze({strict:o,components:t}):{strict:o,components:t},get children(){return n.children},createComponent(d,...c){if(t&&t.indexOf(d)<0)throw new Error(`Unsupported component: ${d}`);let[l,p,...i]=c,f=l!=null?l:{},a=[],w={};if(l)for(let u of Object.keys(l))u!=="children"&&(w[u]=O(Z(l[u])));if(p)if(Array.isArray(p))for(let u of p)a.push(m(u,s));else{a.push(m(p,s));for(let u of i)a.push(m(u,s))}let x=`${r++}`,g={externalProps:o?Object.freeze(f):f,internalProps:w,children:o?Object.freeze(a):a},h=E({kind:1,get children(){return g.children},get props(){return g.externalProps},get remoteProps(){return g.internalProps},remove:()=>v(h),updateProps:u=>pe(h,u,g,n),append:(...u)=>D(h,u.map(C=>m(C,s)),g,n),appendChild:u=>I(h,m(u,s),g,n),removeChild:u=>M(h,u,g,n),replaceChildren:(...u)=>B(h,u.map(C=>m(C,s)),g,n),insertBefore:(u,C)=>R(h,m(u,s),C,g,n),insertChildBefore:(u,C)=>R(h,m(u,s),C,g,n)},j);n.components.set(h,g),Object.defineProperty(h,"type",{value:d,configurable:!1,writable:!1,enumerable:!0}),U(h,n),F(h,x,s);for(let u of g.children)N(h,u,n);return h},createText(d=""){let c=`${r++}`,l={text:d},p=f=>fe(i,f,l,n),i=E({kind:2,get text(){return l.text},update:p,updateText:p,remove:()=>v(i)},j);return U(i,n),F(i,c,s),i},createFragment(){let d=`${r++}`,c={children:o?Object.freeze([]):[]},l=E({kind:3,get children(){return c.children},append:(...p)=>D(l,p.map(i=>m(i,s)),c,n),appendChild:p=>I(l,m(p,s),c,n),removeChild:p=>M(l,p,c,n),replaceChildren:(...p)=>B(l,p.map(i=>m(i,s)),c,n),insertBefore:(p,i)=>R(l,m(p,s),i,c,n),insertChildBefore:(p,i)=>R(l,m(p,s),i,c,n)},j);return n.fragments.set(l,c),U(l,n),F(l,d,s),l},append:(...d)=>D(s,d.map(c=>m(c,s)),n,n),appendChild:d=>I(s,m(d,s),n,n),replaceChildren:(...d)=>B(s,d.map(c=>m(c,s)),n,n),removeChild:d=>M(s,d,n,n),insertBefore:(d,c)=>R(s,m(d,s),c,n,n),insertChildBefore:(d,c)=>R(s,m(d,s),c,n,n),mount(){return n.mounted?Promise.resolve():(n.mounted=!0,Promise.resolve(e(0,n.children.map(_))))}};return s}function le(e,{tops:o}){var t;return((t=o.get(e))===null||t===void 0?void 0:t.kind)===0}function Q(e,o){let t=r=>{if("children"in r)for(let n of r.children)o(n),t(n)};t(e)}function P(e,o,{remote:t,local:r}){let{mounted:n,channel:s}=o;n&&(e.kind===0||le(e,o))&&t(s),r()}function fe(e,o,t,r){return P(e,r,{remote:n=>n(3,e.id,o),local:()=>{t.text=o}})}var y=Symbol("ignore");function pe(e,o,t,r){let{strict:n}=r,{internalProps:s,externalProps:d}=t,c={},l=[],p=!1;for(let i of Object.keys(o)){if(i==="children")continue;let f=d[i],a=o[i],w=s[i],x=Z(a);if(w===x&&(x==null||typeof x!="object"))continue;let[g,h]=H(w,x);h&&l.push(...h),g!==y&&(p=!0,c[i]=g,T(f)&&z(f,r),T(a)&&N(e,a,r))}return P(e,r,{remote:i=>{p&&i(4,e.id,c)},local:()=>{let i=E(E({},d),o);t.externalProps=n?Object.freeze(i):i,t.internalProps=E(E({},t.internalProps),c);for(let[f,a]of l)f[k]=a}})}function H(e,o,t=new Set){return t.has(e)?[y]:typeof e=="function"&&k in e?(t.add(e),[typeof o=="function"?y:O(o),[[e,o]]]):Array.isArray(e)?(t.add(e),me(e,o,t)):b(e)&&!T(e)?(t.add(e),ue(e,o,t)):[e===o?y:o]}function O(e,o=new Map){let t=o.get(e);if(t)return t;if(T(e))return o.set(e,e),e;if(Array.isArray(e)){let r=[];o.set(e,r);for(let n of e)r.push(O(n,o));return r}if(b(e)){let r={};o.set(e,r);for(let n of Object.keys(e))r[n]=O(e[n],o);return r}if(typeof e=="function"){let r=(...n)=>r[k](...n);return Object.defineProperty(r,k,{enumerable:!1,configurable:!1,writable:!0,value:e}),o.set(e,r),r}return e}function A(e,o=new Set){if(!o.has(e)){if(o.add(e),Array.isArray(e))return e.reduce((t,r)=>{let n=A(r,o);return n?[...t,...n]:t},[]);if(b(e))return Object.keys(e).reduce((t,r)=>{let n=A(e[r],o);return n?[...t,...n]:t},[]);if(typeof e=="function")return k in e?[e]:void 0}}function v(e){var o;(o=e.parent)===null||o===void 0||o.removeChild(e)}function D(e,o,t,r){for(let n of o)I(e,n,t,r)}function I(e,o,t,r){var n;let{nodes:s,strict:d}=r;if(!s.has(o))throw new Error("Cannot append a node that was not created by this remote root");let c=o.parent,l=(n=c==null?void 0:c.children.indexOf(o))!==null&&n!==void 0?n:-1;return P(e,r,{remote:p=>{p(1,e.id,l<0?e.children.length:e.children.length-1,_(o),c?c.id:!1)},local:()=>{N(e,o,r);let p;if(c){let i=V(c,r),f=[...i.children];f.splice(l,1),c===e?p=f:(i.children=d?Object.freeze(f):f,p=[...t.children])}else p=[...t.children];p.push(o),t.children=d?Object.freeze(p):p}})}function B(e,o,t,r){for(let n of e.children)M(e,n,t,r);D(e,o,t,r)}function M(e,o,t,r){let{strict:n}=r,s=e.children.indexOf(o);if(s!==-1)return P(e,r,{remote:d=>d(2,e.id,s),local:()=>{z(o,r);let d=[...t.children];d.splice(d.indexOf(o),1),t.children=n?Object.freeze(d):d}})}function R(e,o,t,r,n){var s;let{strict:d,nodes:c}=n;if(!c.has(o))throw new Error("Cannot insert a node that was not created by this remote root");let l=o.parent,p=(s=l==null?void 0:l.children.indexOf(o))!==null&&s!==void 0?s:-1;return P(e,n,{remote:i=>{let f=t==null?e.children.length-1:e.children.indexOf(t);i(1,e.id,f<p||p<0?f:f-1,_(o),l?l.id:!1)},local:()=>{N(e,o,n);let i;if(l){let f=V(l,n),a=[...f.children];a.splice(p,1),l===e?i=a:(f.children=d?Object.freeze(a):a,i=[...r.children])}else i=[...r.children];t==null?i.push(o):i.splice(i.indexOf(t),0,o),r.children=d?Object.freeze(i):i}})}function m(e,o){return typeof e=="string"?o.createText(e):e}function N(e,o,t){let{tops:r,parents:n}=t,s=e.kind===0?e:r.get(e);r.set(o,s),n.set(o,e),X(o,t),Q(o,d=>{r.set(d,s),X(d,t)})}function X(e,o){if(e.kind!==1)return;let t=e.props;t&&Object.values(t).forEach(r=>{T(r)&&N(e,r,o)})}function z(e,o){let{tops:t,parents:r}=o;t.delete(e),r.delete(e),Q(e,n=>{t.delete(n),q(n,o)}),q(e,o)}function q(e,o){if(e.kind!==1)return;let t=e.remoteProps;for(let r of Object.keys(t!=null?t:{})){let n=t[r];T(n)&&z(n,o)}}function U(e,{parents:o,tops:t,nodes:r}){r.add(e),Object.defineProperty(e,"parent",{get(){return o.get(e)},configurable:!0,enumerable:!0}),Object.defineProperty(e,"top",{get(){return t.get(e)},configurable:!0,enumerable:!0})}function _(e){return e.kind===2?{id:e.id,kind:e.kind,text:e.text}:{id:e.id,kind:e.kind,type:e.type,props:e.remoteProps,children:e.children.map(o=>_(o))}}function Z(e){return T(e)?ae(e):e}function ae(e){return{id:e.id,kind:e.kind,get children(){return e.children.map(o=>_(o))}}}function V(e,o){return e.kind===0?o:e.kind===3?o.fragments.get(e):o.components.get(e)}function F(e,o,t){Object.defineProperty(e,"id",{value:o,configurable:!0,writable:!1,enumerable:!1}),Object.defineProperty(e,"root",{value:t,configurable:!0,writable:!1,enumerable:!1})}function ue(e,o,t){if(!b(o)){var r;return[O(o),(r=A(e))===null||r===void 0?void 0:r.map(c=>[c,void 0])]}let n=!1,s=[],d={};for(let c in e){let l=e[c];if(!(c in o)){n=!0;let a=A(l);a&&s.push(...a.map(w=>[w,void 0]))}let p=o[c],[i,f]=H(l,p,t);f&&s.push(...f),i!==y&&(n=!0,d[c]=i)}for(let c in o)c in d||(n=!0,d[c]=O(o[c]));return[n?d:y,s]}function me(e,o,t){if(!Array.isArray(o)){var r;return[O(o),(r=A(e))===null||r===void 0?void 0:r.map(i=>[i,void 0])]}let n=!1,s=[],d=o.length,c=e.length,l=Math.max(c,d),p=[];for(let i=0;i<l;i++){let f=e[i],a=o[i];if(i<d){if(i>=c){n=!0,p[i]=O(a);continue}let[w,x]=H(f,a,t);if(x&&s.push(...x),w===y){p[i]=f;continue}n=!0,p[i]=w}else{n=!0;let w=A(f);w&&s.push(...w.map(x=>[x,void 0]))}}return[n?p:y,s]}function ee(){return(o,t)=>{var r;function n(...s){return $(this,null,function*(){if(s.length===1)return t(...s);let[{channel:d,components:c},l]=s,p=L(d,{components:c,strict:!0}),i=t(p,l);return typeof i=="object"&&i!=null&&"then"in i&&(i=yield i),p.mount(),i})}return(r=globalThis.shopify)===null||r===void 0||r.extend(o,n),n}}var W=ee();var he="admin.product-details.action.render",oe=Date.now(),te="7163232",ge="CACHE_BREAK_v7_"+Math.random().toString(36).substring(7),$e=W(he,(e,{i18n:o,close:t,data:r})=>{var s;if(console.log("\u{1F525}\u{1F525}\u{1F525} DIRECT OVERLAY MODE - NO UI - ActionExtension.js LOADED \u{1F525}\u{1F525}\u{1F525}"),console.log(`\u{1F680}\u{1F680}\u{1F680} THUNDER TEXT OVERLAY v7.0 - COMMIT: ${te} - CACHE BUSTER: ${oe} \u{1F680}\u{1F680}\u{1F680}`),console.log(`\u{1F4A5}\u{1F4A5}\u{1F4A5} FORCE REBUILD: ${ge} \u{1F4A5}\u{1F4A5}\u{1F4A5}`),console.log("Extension loaded with data:",r),console.log("\u{1F3F7}\uFE0F Version tracking - Commit:",te,"Deployed:",new Date().toISOString()),typeof window!="undefined"&&typeof document!="undefined"){let d=document.createElement("meta");d.httpEquiv="Cache-Control",d.content="no-cache, no-store, must-revalidate",(s=document.head)==null||s.appendChild(d)}n();function n(){var d;console.log("\u{1F3AF} Button clicked! Starting Thunder Text overlay workflow...");try{let c="";typeof window!="undefined"&&(c=window.location.hostname.replace(".myshopify.com",""));let l=new URLSearchParams({source:"admin_extension",shop:`${c}.myshopify.com`,cache_bust:oe.toString()});try{if(r&&r.selected&&r.selected.length>0){let f=r.selected[0];console.log("\u{1F4E6} Product data available:",Object.keys(f)),f.id&&l.set("productId",f.id),f.title&&l.set("productTitle",f.title),f.productType&&l.set("productType",f.productType),f.vendor&&l.set("vendor",f.vendor);let a=null;typeof window!="undefined"&&(a=((d=window.shopifyApp)==null?void 0:d.accessToken)||window.sessionToken),a&&l.set("accessToken",a)}else console.log("\u26A0\uFE0F No product selected or data unavailable - continuing with basic workflow")}catch(f){console.log("\u26A0\uFE0F Could not extract product data:",f,"- continuing with basic workflow")}let i=`https://thunder-text-nine.vercel.app${`/overlay-test.html?${l.toString()}`}`;console.log("\u{1F680} Opening Thunder Text overlay:",i),console.log("\u{1F50D} DEBUG: About to call window.open with URL:",i);try{if(typeof window=="undefined"){console.error("window is undefined \u2014 cannot open popup");return}let f=window.open(i,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes");if(console.log("\u{1F50D} DEBUG: window.open returned:",f),console.log("\u{1F50D} DEBUG: newWindow type:",typeof f),console.log("\u{1F50D} DEBUG: newWindow === null:",f===null),f&&f!==null&&!f.closed)console.log("\u2705 Successfully opened overlay window via window.open"),console.log("\u{1F50D} DEBUG: Popup opened successfully, closing extension in 500ms"),setTimeout(()=>{console.log("\u{1F504} Closing admin extension"),t()},500);else{if(console.log("\u26A0\uFE0F Method 1 failed - popup blocked or failed, trying alternatives"),console.log("\u{1F50D} DEBUG: newWindow details:",{exists:!!f,isNull:f===null,isClosed:f?f.closed:"N/A"}),typeof window!="undefined"&&window.top&&window.top!==window){console.log("\u{1F504} Trying window.top.open");try{let a=window.top.open(i,"_blank");if(console.log("\u{1F50D} DEBUG: window.top.open returned:",a),a&&!a.closed){console.log("\u2705 Opened via window.top"),t();return}else console.log("\u26A0\uFE0F window.top.open failed")}catch(a){console.log("\u274C Error with window.top.open:",a)}}if(typeof window!="undefined"&&window.parent&&window.parent!==window){console.log("\u{1F504} Trying window.parent.open");try{let a=window.parent.open(i,"_blank");if(console.log("\u{1F50D} DEBUG: window.parent.open returned:",a),a&&!a.closed){console.log("\u2705 Opened via window.parent"),t();return}else console.log("\u26A0\uFE0F window.parent.open failed")}catch(a){console.log("\u274C Error with window.parent.open:",a)}}console.log("\u{1F6A8} ALL POPUP METHODS FAILED - POPUP BLOCKER DETECTED"),console.log("\u{1F4CB} INSTRUCTION: Please disable popup blocker and try again"),console.log("\u{1F517} MANUAL URL:",i),alert(`Popup blocked! Please:
1. Allow popups for this site
2. Try clicking the button again

Or manually open:
`+i),t()}}catch(f){console.error("\u274C Error in window.open calls:",f),console.log("\u{1F6AB} NOT navigating - popup blocker protection active"),console.log("\u{1F517} Manual URL for user:",i),alert(`Extension error! Please manually open:
`+i),t()}}catch(c){console.error("\u274C Error opening Thunder Text overlay:",c)}}});})();
//# sourceMappingURL=product-description-generator-v4.js.map
